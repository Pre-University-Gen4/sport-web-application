<!DOCTYPE html>
<html lang="km">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sportshub - ស្ថាប័ន</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #F5F5F5;
            color: #000249;
        }
        
        .khmer-text {
            font-family: 'Khmer OS', 'Roboto', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
        }
        
        .hero-section {
            background: linear-gradient(rgba(74, 144, 226, 0.8), rgba(53, 122, 189, 0.8));
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }
        
        .card-hover {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .hero-image {
            transition: opacity 1s ease-in-out;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .hero-image.fade-out {
            opacity: 0;
        }
        
        .hero-image.fade-in {
            opacity: 1;
        }
        
        .custom-bg {
            background-color: #FAF9F0;
        }
        
        .custom-text {
            color: #000249;
        }
        
        .post-button {
            background-color: #007AFF;
        }
        
        .post-button:hover {
            background-color: #0056CC;
        }
        
        .category-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(4px);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            color: #000249;
            border: 1px solid rgba(0, 2, 73, 0.1);
        }
        
        .event-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .heart-circle {
            width: 32px;
            height: 32px;
            background-color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .filter-divider {
            border-bottom: 1px solid #e5e7eb;
            margin-bottom: 24px;
            padding-bottom: 24px;
        }
        /* Modal Styles */
        
        .modal-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: white;
            border-radius: 12px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9) translateY(20px);
            transition: all 0.3s ease;
        }
        
        .modal-overlay.active .modal-content {
            transform: scale(1) translateY(0);
        }
        
        .image-preview {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            margin-top: 10px;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header id="header"></header>

    <!-- Post New Event Modal -->
    <div id="postEventModal" class="modal-overlay">
        <div class="modal-content">
            <div class="p-6">
                <!-- Modal Header -->
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold custom-text">Post New Event</h2>
                    <button id="closeModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <!-- Event Form -->
                <form id="eventForm" class="space-y-4">
                    <!-- Event Title -->
                    <div>
                        <label class="block text-sm font-medium custom-text mb-2">Event Title *</label>
                        <input type="text" id="eventTitle" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Enter event title">
                    </div>

                    <!-- Event Description -->
                    <div>
                        <label class="block text-sm font-medium custom-text mb-2">Event Description</label>
                        <textarea id="eventDescription" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Describe your event"></textarea>
                    </div>

                    <!-- Date and Time -->
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium custom-text mb-2">Date *</label>
                            <input type="date" id="eventDate" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium custom-text mb-2">Time *</label>
                            <input type="time" id="eventTime" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>

                    <!-- Location -->
                    <div>
                        <label class="block text-sm font-medium custom-text mb-2">Location *</label>
                        <input type="text" id="eventLocation" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Event location">
                    </div>

                    <!-- Location Link -->
                    <div>
                        <label class="block text-sm font-medium custom-text mb-2">Location Map Link (iframe src)</label>
                        <textarea id="eventLocationLink" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" rows="2" placeholder='Paste iframe src here: https://www.google.com/maps/embed?pb=...'></textarea>
                        <p class="text-xs text-gray-500 mt-1">Get this from Google Maps → Share → Embed a map → Copy the src attribute from iframe</p>
                    </div>

                    <!-- Category -->
                    <div>
                        <label class="block text-sm font-medium custom-text mb-2">Category *</label>
                        <select id="eventCategory" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="">Select category</option>
                            <option value="football">Football</option>
                            <option value="basketball">Basketball</option>
                            <option value="swimming">Swimming</option>
                            <option value="running">Running</option>
                            <option value="tennis">Tennis</option>
                            <option value="golf">Golf</option>
                        </select>
                    </div>

                    <!-- Event Image Upload -->
                    <div>
                        <label class="block text-sm font-medium custom-text mb-2">Event Image</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition-colors">
                            <input type="file" id="eventImage" accept="image/*" class="hidden">
                            <label for="eventImage" class="cursor-pointer">
                                <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                                <p class="text-sm text-gray-500">Click to upload image</p>
                            </label>
                            <img id="imagePreview" class="image-preview hidden mx-auto">
                        </div>
                    </div>

                    <!-- Form Buttons -->
                    <div class="flex space-x-3 pt-4">
                        <button type="button" id="cancelBtn" class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Cancel
                        </button>
                        <button type="submit" class="flex-1 px-4 py-2 post-button text-white rounded-lg transition-colors">
                            Post Event
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="relative">
        <figure class="h-screen relative overflow-hidden">
            <button id="prevBtn" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full p-3 z-10 transition-all duration-200 shadow-lg">
                <i class="fas fa-chevron-left text-gray-700 text-xl"></i>
            </button>

            <img id="heroImage1" class="hero-image fade-in" src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=1920&h=1080&fit=crop" alt="Group Photo 1">
            <img id="heroImage2" class="hero-image fade-out" src="https://images.unsplash.com/photo-1552674605-db6ffd4facb5?w=1920&h=1080&fit=crop" alt="Group Photo 2">
            <img id="heroImage3" class="hero-image fade-out" src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=1920&h=1080&fit=crop" alt="Group Photo 3">

            <button id="nextBtn" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full p-3 z-10 transition-all duration-200 shadow-lg">
                <i class="fas fa-chevron-right text-gray-700 text-xl"></i>
            </button>

            <div class="absolute inset-0 bg-black bg-opacity-20"></div>
        </figure>
    </section>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Events -->
        <section class="mb-12">
            <header class="flex items-center justify-between mb-6 filter-divider">
                <h2 class="text-2xl font-bold custom-text khmer-text">ព្រឹត្តិការណ៍</h2>

                <!-- Filter Controls -->
                <nav class="flex items-center space-x-4">
                    <!-- Category Filter -->
                    <div class="flex items-center space-x-2">
                        <p class="text-sm font-medium custom-text">Category:</p>
                        <div class="relative">
                            <select id="categoryFilter" class="appearance-none custom-bg border border-gray-300 rounded-lg px-4 py-2 pr-8 custom-text focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-w-32">
                                <option value="">All Sports</option>
                                <option value="football">Football</option>
                                <option value="basketball">Basketball</option>
                                <option value="swimming">Swimming</option>
                                <option value="running">Running</option>
                                <option value="tennis">Tennis</option>
                                <option value="golf">Golf</option>
                            </select>
                            <i class="fas fa-chevron-down absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                        </div>
                    </div>

                    <!-- Search -->
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="Search events..." class="custom-bg border border-gray-300 rounded-lg px-4 py-2 pl-10 custom-text focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-64">
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    </div>
                </nav>
            </header>

            <div id="eventsContainer" class="grid md:grid-cols-3 gap-6">
                <!-- Event cards will be generated by JavaScript -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer id="footer"></footer>

    <script>
        // Global variables
        let eventsData = [{
            id: 1,
            title: "កម្ពុជាធ្វើម្ចាស់ផ្ទះរៀបចំការប្រកួតកីឡាវាយកូនហ្គោលនៃការប្រកួតកីឡាអន្តរជាតិ",
            description: "ការប្រកួតកីឡាបាល់ទាត់រវាងនិស្សិតដ៏អស្ចារ្យ",
            date: "២០២៥-០២-១៥",
            time: "14:00",
            location: "ទីលានកីឡា ISTAD",
            locationLink: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3908.7937414488034!2d104.91444121533492!3d11.568633291834647!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x310951e96d257a6b%3A0x6b66703c5fc0c7cc!2sInstitute%20of%20Science%20and%20Technology%20Advanced%20Development!5e0!3m2!1sen!2skh!4v1642150234567!5m2!1sen!2skh',
            category: "football",
            image: "../Photo_Event/Id1_Even.jpg",
            contact: "012345678"
        }, {
            id: 2,
            title: "ការប្រកីឡាការិនីរត់ប្រណាំង ប៊ូ សំណាង ទោះទៅដល់ទីក្រោយគេ តែឈ្នះបេះដូងប្រជាជនកម្ពុជាកួតហែលទឹក ក្នុងអាងហែលទឹក",
            description: "ការប្រកួតហែលទឹកសម្រាប់អ្នកចូលចិត្តកីឡា",
            date: "២០២៥-០២-២០",
            time: "10:00",
            location: "អាងហែលទឹកជាតិ",
            locationLink: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d62540.49962881492!2d104.88699570861851!3d11.567535195752065!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31095144cbdbf311%3A0x2588e1ac1787eb64!2sWat%20Phnom%20Daun%20Penh!5e0!3m2!1sen!2skh!4v1754378695201!5m2!1sen!2skh',
            category: "swimming",
            image: "../Photo_Event/Id2_Even.jpg",
            contact: "012345679"
        }, {
            id: 3,
            title: "ការប្រកួតកីឡា តេក្វាន់ ដូ អាយធីអែហ្វ អាស៊ីអាគ្នេយ៍លើក ទី២  ឆ្នាំ២០២៥​ In CAMBODIA",
            description: "ការប្រកួតហែលទឹកសម្រាប់អ្នកចូលចិត្តកីឡា",
            date: "២០២៥-០២-២០",
            time: "10:00",
            location: "អាងហែលទឹកជាតិ",
            locationLink: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d62540.49962881492!2d104.88699570861851!3d11.567535195752065!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31095144cbdbf311%3A0x2588e1ac1787eb64!2sWat%20Phnom%20Daun%20Penh!5e0!3m2!1sen!2skh!4v1754378695201!5m2!1sen!2skh',
            category: "swimming",
            image: "../Photo_Event/Id3_Even.jpg",
            contact: "012345679"
        }, {
            id: 4,
            title: "អបអរសាទរពិធីបើកការប្រកួតកីឡាជាតិលើកទី៤  និង កីឡា ជាតិ ជនពិការ លើកទី២",
            description: "ការប្រកួតហែលទឹកសម្រាប់អ្នកចូលចិត្តកីឡា",
            date: "២០២៥-០២-២០",
            time: "10:00",
            location: "អាងហែលទឹកជាតិ",
            locationLink: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d62540.49962881492!2d104.88699570861851!3d11.567535195752065!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31095144cbdbf311%3A0x2588e1ac1787eb64!2sWat%20Phnom%20Daun%20Penh!5e0!3m2!1sen!2skh!4v1754378695201!5m2!1sen!2skh',
            category: "swimming",
            image: "../Photo_Event/Id4_Even.jpg",
            contact: "012345679"
        }, {
            id: 5,
            title: "ការប្រកួតកីឡាបាល់បោះលើវិញ្ញាសា ៣ទល់៣ រវាងកម្ពុជា និងថៃ",
            description: "ការប្រកួតហែលទឹកសម្រាប់អ្នកចូលចិត្តកីឡា",
            date: "២០២៥-០២-២០",
            time: "10:00",
            location: "អាងហែលទឹកជាតិ",
            locationLink: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d62540.49962881492!2d104.88699570861851!3d11.567535195752065!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31095144cbdbf311%3A0x2588e1ac1787eb64!2sWat%20Phnom%20Daun%20Penh!5e0!3m2!1sen!2skh!4v1754378695201!5m2!1sen!2skh',
            category: "swimming",
            image: "../Photo_Event/Id5_Even.jpg",
            contact: "012345679"
        }, {
            id: 6,
            title: "ការប្រកួតហែលទឹក ក្នុងអាងហែលទឹក",
            description: "ការប្រកួតហែលទឹកសម្រាប់អ្នកចូលចិត្តកីឡា",
            date: "២០២៥-០២-២០",
            time: "10:00",
            location: "Djokovic ថា Nadalនឹងនៅតែខ្លាំងពេលត្រឡប់ពីរបួសវិញ ទោះបច្ចុប្បន្នធ្លាក់ចំណាត់ថ្នាក់ដល់៦៧០ពិភពលោកក្ដី",
            locationLink: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d62540.49962881492!2d104.88699570861851!3d11.567535195752065!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31095144cbdbf311%3A0x2588e1ac1787eb64!2sWat%20Phnom%20Daun%20Penh!5e0!3m2!1sen!2skh!4v1754378695201!5m2!1sen!2skh',
            category: "swimming",
            image: "../Photo_Event/Id6_Even.jpg",
            contact: "012345679"
        }];

        let filteredEvents = [...eventsData];
        let favoriteEvents = new Set(); // Track favorite event IDs
        let showOnlyFavorites = false;

        // Generate unique ID
        function generateId() {
            return Date.now() + Math.random();
        }

        // Format date to Khmer
        function formatDateToKhmer(dateStr) {
            const date = new Date(dateStr);
            const months = ['មករា', 'កុម្ភៈ', 'មីនា', 'មេសា', 'ឧសភា', 'មិថុនា',
                'កក្កដា', 'សីហា', 'កញ្ញា', 'តុលា', 'វិច្ឆិកា', 'ធ្នូ'
            ];
            return `${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()}`;
        }

        // Create event card HTML
        function createEventCard(event, index) {
            const isFavorite = favoriteEvents.has(event.id);
            return `
                <article class="bg-white rounded-lg shadow-md overflow-hidden card-hover" data-category="${event.category}" data-event-id="${event.id}" onclick="navigateToEventDetail(${event.id})">
                    <figure class="aspect-video relative">
                        <div class="category-badge">${event.category}</div>
                        <img src="${event.image}" alt="${event.title}" class="event-image">
                        <div class="absolute top-3 right-3 heart-circle">
                            <i class="fas fa-heart ${isFavorite ? 'text-red-500' : 'text-gray-300'} cursor-pointer text-sm" data-event-id="${event.id}" onclick="event.stopPropagation(); toggleEventHeart(this, ${event.id})"></i>
                        </div>
                    </figure>
                    <div class="p-4">
                        <h3 class="font-semibold custom-text mb-2 khmer-text">${event.title}</h3>
                        <div class="flex items-center text-gray-500 text-sm mb-2">
                            <i class="fas fa-calendar-alt mr-2"></i>
                            <span>${formatDateToKhmer(event.date)}</span>
                        </div>
                        <div class="flex items-center text-gray-500 text-sm mb-2">
                            <i class="fas fa-clock mr-2"></i>
                            <span>${event.time}</span>
                        </div>
                        <address class="flex items-center text-gray-500 text-sm not-italic">
                            <i class="fas fa-map-marker-alt mr-2"></i>
                            <span>${event.location}</span>
                        </address>
                    </div>
                </article>
            `;
        }

        // Navigation function to event detail page
        function navigateToEventDetail(eventId) {
            const selectedEvent = eventsData.find(event => event.id === eventId);
            if (selectedEvent) {
                // Store event data and favorites in localStorage for the detail page
                localStorage.setItem('selectedEventData', JSON.stringify(selectedEvent));
                localStorage.setItem('favoriteEvents', JSON.stringify(Array.from(favoriteEvents)));
                // Open detail page in same window
                window.location.href = 'event_detail.html';
            }
        }

        // Function to toggle heart on event cards
        function toggleEventHeart(heartElement, eventId) {
            if (favoriteEvents.has(eventId)) {
                favoriteEvents.delete(eventId);
                heartElement.classList.remove('text-red-500');
                heartElement.classList.add('text-gray-300');
            } else {
                favoriteEvents.add(eventId);
                heartElement.classList.add('text-red-500');
                heartElement.classList.remove('text-gray-300');
            }
            updateFavoriteCount();

            // If we're in favorites-only mode, re-apply filters
            if (showOnlyFavorites) {
                applyFilters();
            }
        }

        // Update favorite count in header
        function updateFavoriteCount() {
            const favoriteCount = document.getElementById('favoriteCount');
            const count = favoriteEvents.size;
            if (count > 0) {
                favoriteCount.textContent = count;
                favoriteCount.classList.remove('hidden');
            } else {
                favoriteCount.classList.add('hidden');
            }
        }

        // Header Component
        function createHeader() {
            return `
                <div class="custom-bg shadow-sm border-b border-gray-200">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="flex justify-between items-center py-1">
                            <!-- Logo -->
                            <div class="flex items-center">
                                <img src="../img-about/Gemini_Generated_Image_iq64ugiq64ugiq64-removebg-preview 1.png" alt="Logo" class="w-13 h-full object-cover">
                            </div>

                            <!-- Navigation -->
                            <nav class="hidden md:flex space-x-8">
                                <a href="../../index.html" class="custom-text hover:text-blue-600 transition-colors font-medium">Home</a>
                                <a href="../html/event.html" class="text-blue-600 font-medium border-b-2 border-blue-600 pb-1">Event</a>
                                <a href="../html/about.html" class="custom-text hover:text-blue-600 transition-colors font-medium">About</a>
                            </nav>

                            <!-- Right Side Icons and Button -->
                            <div class="flex items-center space-x-4">
                                <!-- Heart/Favorite Icon -->
                                <button id="favoriteBtn" class="p-2 text-gray-600 hover:text-red-500 transition-colors relative">
                                    <i class="fas fa-heart text-xl"></i>
                                    <span id="favoriteCount" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
                                </button>

                                <!-- Account Icon -->
                                <button class="p-2 text-gray-600 hover:text-blue-600 transition-colors">
                                    <i class="fas fa-user-circle text-xl"></i>
                                </button>

                                <!-- Post Button -->
                                <button id="postEventBtn" class="post-button text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2">
                                    <i class="fas fa-plus"></i>
                                    <span>Post</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Footer Component
        function createFooter() {
            return `
               <!-- Footer -->
    <footer class="custom-bg text-[#000249] py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-5 gap-8">
                <div>
                    <h1 class="text-lg font-semibold mb-4 khmer-text">Organized By</h1>
                    <img src="../img-about/istad.png" alt="ISTAD Logo" class="w-20 h-15 mb-4">
                </div>

                <div>
                    <h1 class="text-lg font-semibold mb-4 khmer-text">Prepared By</h1>
                    <img src="../img-about/logo.png" alt="sportshub Logo" class="w-21 h-20 mb-4">
                </div>

                <nav>
                    <h3 class="text-lg font-semibold mb-4 khmer-text">Category</h3>
                    <ul class="space-y-2 text-[#000249] ">
                        <li><a href="#" class="hover:text-blue-600 transition-colors">Football</a></li>
                        <li><a href="#" class="hover:text-blue-600 transition-colors">Basketball</a></li>
                        <li><a href="#" class="hover:text-blue-600 transition-colors">Swimming</a></li>
                        <li><a href="#" class="hover:text-blue-600 transition-colors">Tennis</a></li>
                        <li><a href="#" class="hover:text-blue-600 transition-colors">Golf</a></li>
                    </ul>
                </nav>

                <nav>
                    <h3 class="text-lg font-semibold mb-4 khmer-text">Quick Links</h3>
                    <ul class="space-y-2 text-[#000249] ">
                        <li><a href="#" class="hover:text-blue-600 transition-colors">All News</a></li>
                        <li><a href="#" class="hover:text-blue-600 transition-colors">Event</a></li>
                        <li><a href="#" class="hover:text-blue-600 transition-colors">About Us</a></li>
                    </ul>
                </nav>

                <nav>
                    <h3 class="text-lg font-semibold mb-4">Connect With Us</h3>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-600 hover:text-blue-600 transition-colors">
                            <i class="fab fa-facebook-f text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-600 hover:text-blue-600 transition-colors">
                            <i class="fab fa-telegram text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-600 hover:text-blue-600 transition-colors">
                            <i class="fab fa-instagram text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-600 hover:text-blue-600 transition-colors">
                            <i class="fab fa-youtube text-xl"></i>
                        </a>
                    </div>
                </nav>
            </div>

            <div class="border-t border-gray-300 mt-8 pt-8 text-center">
                <p class="text-[#000249]  text-sm">© 2025 SportHub. All Rights Reserved.</p>
            </div>
        </div>
    </footer>
            `;
        }

        // Render events
        function renderEvents() {
            const eventsContainer = document.getElementById('eventsContainer');
            if (filteredEvents.length === 0) {
                eventsContainer.innerHTML = `
                    <div class="col-span-3 text-center py-12">
                        <i class="fas fa-search text-gray-400 text-4xl mb-4"></i>
                        <p class="text-gray-500 text-lg">No events found matching your criteria</p>
                    </div>
                `;
                return;
            }

            eventsContainer.innerHTML = filteredEvents
                .map((event, index) => createEventCard(event, index))
                .join('');
        }

        // Filter functionality
        function initFilters() {
            const categoryFilter = document.getElementById('categoryFilter');
            const searchInput = document.getElementById('searchInput');

            function applyFilters() {
                const selectedCategory = categoryFilter.value;
                const searchTerm = searchInput.value.toLowerCase();

                filteredEvents = eventsData.filter(event => {
                    // Favorite filter
                    const favoriteMatch = !showOnlyFavorites || favoriteEvents.has(event.id);

                    // Category filter
                    const categoryMatch = !selectedCategory || event.category === selectedCategory;

                    // Search filter
                    const searchMatch = !searchTerm ||
                        event.title.toLowerCase().includes(searchTerm) ||
                        event.location.toLowerCase().includes(searchTerm) ||
                        event.category.toLowerCase().includes(searchTerm) ||
                        (event.description && event.description.toLowerCase().includes(searchTerm));

                    return favoriteMatch && categoryMatch && searchMatch;
                });

                renderEvents();
            }

            // Make applyFilters available globally
            window.applyFilters = applyFilters;

            categoryFilter.addEventListener('change', applyFilters);
            searchInput.addEventListener('input', applyFilters);
        }

        // Modal functionality
        function initModal() {
            const postEventBtn = document.getElementById('postEventBtn');
            const postEventModal = document.getElementById('postEventModal');
            const closeModal = document.getElementById('closeModal');
            const cancelBtn = document.getElementById('cancelBtn');
            const eventForm = document.getElementById('eventForm');
            const eventImage = document.getElementById('eventImage');
            const imagePreview = document.getElementById('imagePreview');

            // Open modal
            postEventBtn.addEventListener('click', function() {
                postEventModal.classList.add('active');
                document.body.style.overflow = 'hidden';
            });

            // Close modal functions
            function closeModalFunc() {
                postEventModal.classList.remove('active');
                document.body.style.overflow = 'auto';
                eventForm.reset();
                imagePreview.classList.add('hidden');
            }

            closeModal.addEventListener('click', closeModalFunc);
            cancelBtn.addEventListener('click', closeModalFunc);

            // Close modal when clicking overlay
            postEventModal.addEventListener('click', function(e) {
                if (e.target === postEventModal) {
                    closeModalFunc();
                }
            });

            // Image preview
            eventImage.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        imagePreview.src = e.target.result;
                        imagePreview.classList.remove('hidden');
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Handle form submission
            eventForm.addEventListener('submit', function(e) {
                e.preventDefault();

                // Get form data
                const formData = {
                    id: generateId(),
                    title: document.getElementById('eventTitle').value,
                    description: document.getElementById('eventDescription').value,
                    date: document.getElementById('eventDate').value,
                    time: document.getElementById('eventTime').value,
                    location: document.getElementById('eventLocation').value,
                    locationLink: document.getElementById('eventLocationLink').value || 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3908.7937414488034!2d104.91444121533492!3d11.568633291834647!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x310951e96d257a6b%3A0x6b66703c5fc0c7cc!2sInstitute%20of%20Science%20and%20Technology%20Advanced%20Development!5e0!3m2!1sen!2skh!4v1642150234567!5m2!1sen!2skh',
                    category: document.getElementById('eventCategory').value,
                    contact: document.getElementById('eventContact').value,
                    image: imagePreview.src || 'https://via.placeholder.com/800x400'
                };

                // Add to events array
                eventsData.unshift(formData);
                filteredEvents = [...eventsData];

                // Re-render events
                renderEvents();

                // Close modal and show success
                closeModalFunc();
                alert('Event posted successfully!');
            });
        }

        // Hero image navigation
        function initManualImageNavigation() {
            const images = ['heroImage1', 'heroImage2', 'heroImage3'];
            let currentImageIndex = 0;

            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            function showImage(index) {
                images.forEach((imageId, i) => {
                    const img = document.getElementById(imageId);
                    if (i === index) {
                        img.classList.remove('fade-out');
                        img.classList.add('fade-in');
                    } else {
                        img.classList.remove('fade-in');
                        img.classList.add('fade-out');
                    }
                });
            }

            prevBtn.addEventListener('click', () => {
                currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
                showImage(currentImageIndex);
            });

            nextBtn.addEventListener('click', () => {
                currentImageIndex = (currentImageIndex + 1) % images.length;
                showImage(currentImageIndex);
            });
        }

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Inject header and footer
            document.getElementById('header').innerHTML = createHeader();
            document.getElementById('footer').innerHTML = createFooter();

            // Load favorites from localStorage if available
            const savedFavorites = localStorage.getItem('favoriteEvents');
            if (savedFavorites) {
                favoriteEvents = new Set(JSON.parse(savedFavorites));
                updateFavoriteCount();
            }

            // Render events
            renderEvents();

            // Initialize all functionality
            initManualImageNavigation();
            initModal();
            initFilters();

            // Initialize favorite button in header
            document.getElementById('favoriteBtn').addEventListener('click', function() {
                showOnlyFavorites = !showOnlyFavorites;

                if (showOnlyFavorites) {
                    this.classList.add('text-red-500');
                    this.classList.remove('text-gray-600');
                } else {
                    this.classList.remove('text-red-500');
                    this.classList.add('text-gray-600');
                }

                // Apply filters to show/hide favorite events
                window.applyFilters();
            });
        });
    </script>
</body>

</html>